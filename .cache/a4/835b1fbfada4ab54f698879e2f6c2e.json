{"id":"html/story/map/map.html","dependencies":[{"name":"src/scripts/helpers/helpers.js","includedInParent":true,"mtime":1569384222000},{"name":"metadata/meta.json","includedInParent":true,"mtime":1570788078000},{"name":"src/html/layouts/default.hbs","includedInParent":true,"mtime":1573067332214},{"name":"src/html/base/analytics.hbs","includedInParent":true,"mtime":1569020636000},{"name":"src/html/base/fonts.hbs","includedInParent":true,"mtime":1569374296000},{"name":"src/html/base/footer.hbs","includedInParent":true,"mtime":1569423822000},{"name":"src/html/base/head.hbs","includedInParent":true,"mtime":1573067248037},{"name":"src/html/base/headline.hbs","includedInParent":true,"mtime":1572255411972},{"name":"src/html/base/meta.hbs","includedInParent":true,"mtime":1569374186000},{"name":"src/html/base/navbar.hbs","includedInParent":true,"mtime":1573071556561},{"name":"src/html/story/basic.hbs","includedInParent":true,"mtime":1573159168396},{"name":"src/html/story/bike.hbs","includedInParent":true,"mtime":1571040906826},{"name":"src/html/story/candidates.hbs","includedInParent":true,"mtime":1572257539653},{"name":"src/html/story/chart.hbs","includedInParent":true,"mtime":1570728674000},{"name":"src/html/story/harrypotter.hbs","includedInParent":true,"mtime":1571039893551},{"name":"src/html/story/illustrator_demo.hbs","includedInParent":true,"mtime":1569423624000},{"name":"src/html/story/map.hbs","includedInParent":true,"mtime":1573079711203},{"name":"src/html/story/numberof.hbs","includedInParent":true,"mtime":1573073590538},{"name":"src/html/story/templates-copy.hbs","includedInParent":true,"mtime":1573159159246},{"name":"src/html/story/templates.hbs","includedInParent":true,"mtime":1573072536963},{"name":"src/html/story/map/geo-data.js","includedInParent":true,"mtime":1564866391594},{"name":"./geo-data.js","dynamic":true,"resolved":"/Users/humeralodhi/Desktop/CurrentMS/Storytelling/Portfolio/Portfolio/src/html/story/map/geo-data.js","parent":"/Users/humeralodhi/Desktop/CurrentMS/Storytelling/Portfolio/Portfolio/src/html/story/map/map.html"},{"name":"/Users/humeralodhi/Desktop/CurrentMS/Storytelling/Portfolio/Portfolio/package.json","includedInParent":true,"mtime":1571039674803}],"generated":{"html":"<!DOCTYPE html>\n<html>\n\n<head>\n\n\t<title>Your Map</title>\n\t<meta charset=\"utf-8\">\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n\t<!-- \nTHESE ARE CALLS TO DIFFERENT EXTERNAL FILES\nMAPBOX HAS A JAVASCRIPT LIBRARY THAT YOU NEED\nTHE NEXT IS A CSS FILE FOR THE MAP\nAND THE FINAL ONE IS THE LIBRARY FOR JQUERY, WHICH I USE FOR THE PULLDOWN MENU.\n -->\n\n\t<script src=\"https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js\"></script>\n\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/Turf.js/5.1.5/turf.min.js\"></script>\n\t<link href=\"https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.css\" rel=\"stylesheet\">\n\t<script src=\"https://code.jquery.com/jquery-2.1.1.min.js\"></script>\n\t<!-- \nTHESE ARE CSS STYLES WHAT YOU SHOULD FREELY PLAY WITH\nTHE STYLES THAT BEGIN WITH # RELATE TO IDS, \nTHE ONES THAT BEGIN WITH . RELATE TO CLASSES\nWHEN YOU GOT EVERYTHING WORKING YOU CAN PLAY WITH THESE AND ADD TO THESE \nTO MAKE YOUR FONTS AND LAYOUTS NICE AND LOVELY\n -->\n\n\t<style>::-webkit-scrollbar {\n\t\t\twidth: 0px;\n\t\t\t/* remove scrollbar space */\n\t\t\tbackground: transparent;\n\t\t\t/* optional: just make scrollbar invisible */\n\t\t}\n\n\t\t.info {\n\t\t\tpadding: 6px 8px;\n\t\t\tfont: 14px/16px Arial, Helvetica, sans-serif;\n\t\t\tbackground: black;\n\t\t\tbackground: rgba(255, 255, 255, 0.8);\n\t\t\tbox-shadow: 0 0 15px rgba(0, 0, 0, 0.2);\n\t\t\tborder-radius: 5px;\n\t\t}\n\n\t\t.info h4 {\n\t\t\tmargin: 0 0 5px;\n\t\t\tcolor: #777;\n\t\t}\n\n\t\t.legend {\n\t\t\ttext-align: left;\n\t\t\tline-height: 18px;\n\t\t\tcolor: #555;\n\t\t}\n\n\t\t.legend i {\n\t\t\twidth: 18px;\n\t\t\theight: 18px;\n\t\t\tfloat: left;\n\t\t\tmargin-right: 8px;\n\t\t\topacity: 0.4;\n\t\t}\n\n\t\tbody {\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\t#select-menu {\n\t\t\tposition: absolute;\n\t\t\tleft: 50px;\n\t\t\ttop: 10px;\n\t\t\tz-index: 10;\n\t\t}\n\n\t\t#map {\n\t\t\tflex: 2;\n\t\t\theight: calc(100vh - 30px);\n\t\t}\n\t\t#articlePlace {\n\t\t\tflex: 1;\n\t\t\theight: calc(100vh - 30px);\n\t\t\toverflow: scroll;\n\t\t\tmargin: 15px;\n\t\t}\n\n\t\t#color-scale {\n\t\t\tposition: absolute;\n\t\t\tbottom: 40px;\n\t\t\tright: 10px;\n\t\t\tz-index: 10;\n\t\t\tbackground: rgba(255, 255, 255, 0.75);\n\t\t\tpadding: 5px;\n\t\t}\n\n\t\t#color-scale > div span {\n\t\t\tdisplay: inline-block;\n\t\t\theight: 25px;\n\t\t\twidth: 20px;\n\t\t\tmargin-right: 5px;\n\t\t\tvertical-align: middle;\n\t\t}\n\n\t\t#color-scale p {\n\t\t\tfont-weight: bold;\n\t\t\tpadding-bottom: 5px;\n\t\t\tmargin: 0;\n\t\t}</style>\n\n</head>\n<!-- THE BODY OF THE HTML BEGINS HERE -->\n\n<body>\n\n\t<!-- \nTHE DIVS BELOW ARE SUPER IMPORTANT:\nTHEY ARE WHERE THE MAP WILL GO, AND YOUR ARTICLE TEXT WILL GO\nYOU WILL CERTAINLY WANT TO STYLE THESE, BOTH THEIR PLACEMENT AND CONTENT \nTHE MAP SHOULD BE EMPTY.\nWHATEVER INTRODUCTORY TEXT YOU WANT CAN GO INTO THE ARTICLEPLACE DIV\n -->\n\n\n\t<div id=\"map\">\n\t\t<div id=\"dropdown\">\n\t\t\t<select id=\"select-menu\">\n\t\t\t\t<option value=\"\">All Groups</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<!-- <div id='color-scale'>\n\t\t\t<p>Rating</p>\n\t\t\t<div><span style='background-color: #ece2f0'></span>1</div>\n\t\t\t<div><span style='background-color: #a6bddb'></span>5</div>\n\t\t\t<div><span style='background-color: #1c9099'></span>10</div>\n\t\t</div> -->\n\n\t</div>\n\t<!--<div id='articlePlace'> all of your text can go here.</div> -->\n\t<!-- \nINSIDE THE MAP DIV  ARE TWO THINGS, THE DROP-DOWN MENU AND THE RATING LEGEND\n\n\nDROP-DOWN MENU: THE ID selectâ€“menu IS USED BY THE JQUERY FUNCTION WAY DOWN AT THE BOTTOM\nTHIS HTML SETS UP THE PULLDOWN MENU\nIF YOU HAVE MULTIPLE GROUPS THE JQUERY AT THE BOTTOM \nWILL UPDATE THE SELECT MENU FOR YOU\n\nRATING: THIS IS A NEW INNOVATION BY SOMA. I WILL GO OVER IT NEXT WEEK, \nIT SHOULD BE THE LAST THING YOU DEAL WITH. \nIT IS THERE FOR YOU TO USE THE NEW 'RATING' PROPERTY\nTO AUTOMATICALLY SET A COLOR RANGE. \nIT IS NOT WORKING IN THIS EXAMPLE.\n -->\n\n\t<!-- \nTHIS IS WHERE THE BROWSER LOADS IN YOUR GEOJSON INFORMATION\nMAKING IT A JAVASCRIPT FILE .js, RATHER THAN A GEOJSON FILE\nALLOWS YOU TO LOAD IT LOCALLY WITHOUT DEALING WITH SETTING UP SERVERS ON YOUR MACHINE.\n -->\n\n\t<script type=\"text/javascript\" src=\"/b05845219599c57fb2d9c5818c1f7800.js\"></script>\n\n\t<!-- \nHERE BEGINS ALL THE SCRIPT THAT SETS UP THE MAP \nALL THE COMMENTS FROM HERE WE'LL BE IN JAVASCRIPT COMMENTS //\n -->\n\n\t<script>function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// these seven lines maybe the only lines you need to edit\n// you should put in your own access token\n// you can change the style of the tiles\n// as well as the center and the zoom\n// but note that way down below this is a method that auto centers and zooms:\n// map.fitBounds(turf.bbox(infoData), { padding: 120, linear: true })\n//If you want to control the centering and zoom yourself, comment out that line.\nmapboxgl.accessToken = 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw';\nvar map = new mapboxgl.Map({\n  container: 'map',\n  // HTML container ID\n  style: 'mapbox://styles/mapbox/light-v10',\n  // style URL\n  center: [-5.9270884, 40.1436456],\n  // starting position as [lng, lat]\n  zoom: 1\n});\nmap.addControl(new mapboxgl.NavigationControl(), 'top-left'); // all of this JavaScript manages what's displayed on hover and click\n\nvar popup = new mapboxgl.Popup({\n  closeButton: false,\n  closeOnClick: false\n});\nvar hoverCurrentId = null;\nvar datalayer;\n\nfunction updateArticle(e) {\n  var feature = e.features[0];\n  document.getElementById(\"articlePlace\").innerHTML = feature.properties.article;\n}\n\nfunction startHover(e) {\n  var feature = e.features[0];\n\n  if (hoverCurrentId) {\n    map.setFeatureState({\n      source: 'datalayer',\n      id: hoverCurrentId\n    }, {\n      hover: false\n    });\n  }\n\n  hoverCurrentId = feature.id;\n  map.setFeatureState({\n    source: 'datalayer',\n    id: hoverCurrentId\n  }, {\n    hover: true\n  });\n}\n\nfunction stopHover(e) {\n  if (hoverCurrentId) {\n    map.setFeatureState({\n      source: 'datalayer',\n      id: hoverCurrentId\n    }, {\n      hover: false\n    });\n  }\n\n  hoverCurrentId = null;\n}\n\nfunction drawPopup(e) {\n  var feature = e.features[0];\n  map.getCanvas().style.cursor = 'pointer';\n  var coordinates = e.lngLat; //turf.centerOfMass(feature);\n\n  var headline = feature.properties.headline;\n  var name = feature.properties.name;\n  var wpercent = feature.properties.white_percent;\n  var list = feature.properties.list;\n  var list2 = feature.properties.list2;\n\n  while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n    coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n  }\n\n  popup.setLngLat(coordinates).setHTML(\"<h3>\".concat(name, \"</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<h4>\").concat(headline, \"</h4>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<h5><ul style=\\\"list-style-type:disc;\\\">\\n  \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li>\").concat(list, \"</li>\\n \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li>\").concat(list2, \"</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</h5>\")).addTo(map);\n}\n\nfunction removePopup(e) {\n  map.getCanvas().style.cursor = '';\n  popup.remove();\n}\n\nmap.on('load', function () {\n  var _paint;\n\n  for (var i = 0; i < infoData.features.length; i++) {\n    infoData.features[i]['id'] = i + 1;\n  } // the JavaScript below sets up the styles of the colors based on your properties\n  // color, radius, and rating\n  // Soma's explanation of 'paint': https://gist.github.com/jsoma/c91cfa7a1f4f8346d95ac2a907f0cb0c\n\n\n  datalayer = map.addLayer({\n    id: \"datalayer\",\n    type: \"fill\",\n    source: {\n      type: \"geojson\",\n      data: infoData\n    },\n    paint: (_paint = {\n      'fill-color': ['get', 'color']\n    }, _defineProperty(_paint, \"fill-color\", ['interpolate', ['linear'], [\"to-number\", [\"get\", \"rating\"]], 0, '#92A3A0', 1, '#DDEEEB', 1000, '#C6E3DE', 10000, \"#98cdc4\", 100000, \"#AAD5CD\", 1000000, \"#65b3a6\", 10000000, '#54ab9c', 50000000, '#43897d', 100000000, '#32675e', 1000000000, '#22443f']), _defineProperty(_paint, 'fill-outline-color', 'white'), _defineProperty(_paint, 'fill-opacity', ['case', ['boolean', ['feature-state', 'hover'], false], 1, 0.95]), _paint)\n  }); // these functions control Mouse actions\n  // they make the pop-up headline or update the article text\n  // When we move the mouse over, draw the popup and change the hover style\n\n  map.on('mousemove', 'datalayer', function (e) {\n    startHover(e);\n    drawPopup(e);\n  }); // When we move the mouse away from a point, turn off the hovering and popup\n\n  map.on('mouseleave', 'datalayer', function (e) {\n    stopHover(e);\n    removePopup(e);\n  }); // When we click, update the article (the right-hand side)\n\n  map.on('click', 'datalayer', function (e) {\n    updateArticle(e);\n  }); // very important!! this automatically centers the map and zooms it\n  //map.fitBounds(turf.bbox(infoData), { padding: 20, linear: true })\n});</script>\n\t<script>// this part is J query / with some mapbox JavaScript\n// it changes what is displayed based on the pulldown menu\nvar groupsObj = {};\n$(document).ready(function () {\n  infoData.features.forEach(function (feature) {\n    groupsObj[feature.properties.group_id] = feature.properties.group_name;\n  });\n  $.each(groupsObj, function (key, value) {\n    $('#select-menu').append($(\"<option></option>\").attr(\"value\", value).text(value));\n  });\n  $('#select-menu').change(function () {\n    var selectedGroup = $('#select-menu').val();\n\n    if (!selectedGroup) {\n      map.setFilter('datalayer', null);\n    } else {\n      map.setFilter('datalayer', ['==', ['get', 'group_name'], selectedGroup]);\n    }\n  });\n});</script>\n\n<script>var map = L.map('canvas', {\n  zoomControl: false\n}).setView([38.82259, -2.8125], 3);\nmap.setMaxBounds([[84.67351256610522, -174.0234375], [-58.995311187950925, 223.2421875]]);\nvar osmLayer = new L.TileLayer(\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n  noWrap: true\n}).addTo(map);</script>\n\n\n</body>\n\n</html>"},"sourceMaps":null,"error":null,"hash":"6136b4220cde31e4df15f27cf85abe08","cacheData":{"env":{}}}